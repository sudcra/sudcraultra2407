<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Análisis académico de resultados :: SUDCRA</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="with=device-width, initial-scale=1.0">
    <!--iconos-->
    <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous" ></script>
    <!--boostrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <!--chartjs y pluggins-->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        *{
            margin: 0;
            padding: 0;
            font-family: 'Lato', 'Poppins', sans-serif;
            font-weight: 400;
            font-size: 13px;
            color: rgb(42, 75, 90);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: #F3F4F4;
        }

        main {
            width: 60%;
            min-width: 350px;
            max-width: 1000px;
            margin: auto;
            background: #fff;
        }

        /* TABLA */
        table{
            border-collapse: collapse;
            margin: 5px;
        }

        thead td{
            text-transform: uppercase;
            text-align: start;
            padding: 15px;
        }

        tbody tr td{
            padding: 5px 10px;
            text-align: left;
            width: fit-content;
            background-color: #fff;
        }

        /* ROW */
        .row{
            max-width: 1000px;
            display: flex;
            justify-content: space-between;
            --bs-gutter-x:0;
        }

        .comentarios p {
            background-color: rgb(207, 244, 252);
            border: 1px solid rgb(182, 239, 251);
            color: rgb(5, 81, 96);
            border-radius: 0.25rem;
            margin: 10px 20px 10px 20px;
        }
        /* BLOQUE */
        
        .bloque{
            max-width: 1000px;
            margin: auto;
            margin-top: 5%;
            text-align: center;
        }

        .bloque h4{
            color: rgb(138, 138, 138);
            text-align: left;
            font-size: 18px;
            margin-left: 20px;
            margin-right: 20px;
        }

        p{
            color: #777;
            font-size: 14px;
            font-weight: 300;
            line-height: 22px;
            padding: 10px;
        }

        .bloque-col-50{
            flex-basis: 50%;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            height: 300px;
            padding: 10px;
            box-sizing: border-box;
        }

        .bloque-col-100{
            flex-basis: 100%;
            border-radius: 5px;
            position: relative;
            overflow: hidden;
            height: auto;
            box-sizing: border-box;
        }

        .bloque-col-1{
            flex-basis: 32%;
            border-radius: 5px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .bloque-col img{
            width: 100%;
            display: block;
        }

        .bloque-col p {
            position: absolute;
            bottom: 0;
            color: #ffffff;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
        }

        .lamina-columna{
            display: flex;
            flex-direction: column;
        }

        .lamina-1 {
            background: #fff;
            border-radius: 0.25rem;
            padding: 10px;
            margin: 10px;
            box-shadow: 0px 3px 2px 0px #cccccc;
            line-height: 15.5px;
            border: 1px solid rgba(125, 172, 168, 0.3);
            transition: 0.5s ease;
        }

        .lamina-1:hover{
            border: 1px solid rgb(248, 135, 126);
            box-shadow: 0px 3px 12px 0px #cccccc;
        }

        .lamina-grafico {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #fff;
        border-radius: 0.25rem;
        margin: 10px;
        height: 264px;
        box-sizing: border-box;
        box-shadow: 0px 3px 2px 0px #cccccc;
        overflow: hidden; /* Evita el desbordamiento de los elementos hijos */
        border: 1px solid rgba(125, 172, 168, 0.3);
        transition: 0.5s ease;
        position: relative;
        }

        .lamina-grafico:hover{
            border: 1px solid rgb(248, 135, 126);
            box-shadow: 0px 3px 12px 0px #cccccc;
        }

        .lamina-grafico .header {
            padding: 5px;
            padding-left: 10px;
            position: absolute;
            top: 0;
            justify-content: space-between;
            width: 100%;
            box-sizing: border-box;
            background-color: rgba(243, 245, 244,0.5);
        }

        .lamina-grafico .header .titulo {
            display: flex;
            flex-direction: column;
        }

        .lamina-grafico .header .control {
            background-color: blue;
        }

        .lamina-grafico .header .titulo h4 {
            text-align: left;
            font-size: 14px;
            margin: 0;
            margin-top: 10px;
            margin-bottom: 5px;
            font-weight: 600;
            padding-left: 10px;
            background-color: transparent;
        }

        .lamina-grafico .header .titulo p {
            text-align: left;
            color: rgb(176, 176, 176);
            font-size: 12px;
            font-weight: 300;
            line-height: 16px;
            margin: 0;
            padding: 0;
            padding-left: 10px;
            background-color: transparent;
        }

        .lamina-grafico canvas {
            position: absolute;
            top: 80px;
            margin: 0px 60px 0px 60px; /* reducir posteriormente con media query */
            background: transparent;
        }

        .lamina-grafico-2{
            display: flex;
            flex-direction: column;
            text-align: center;
            justify-content: center;
            background: #fff;
            border-radius: 5px;
            margin: 10px 20px 10px 20px;
            box-sizing: border-box;
            box-shadow: 0px 3px 2px 0px #cccccc;
            background: transparent;
            border: 1px solid transparent;
            transition: 0.5s ease;
        }

        .lamina-grafico-2:hover{
            border: 1px solid rgb(248, 135, 126);
            box-shadow: 0px 3px 12px 0px #cccccc;
            background: transparent;
        }

        .lamina-grafico-2 .header{
            padding: 10px;
            display: flex;
            justify-content: space-between;
            
        }

        .lamina-grafico-2 .header .titulo {
            display: flex;
            flex-direction: column;
            padding-right: 10px;
        }

        .lamina-grafico-2 .header .control {
            display: flex;
            justify-content: center;
            width: auto;
            padding: 5px;
        }
        .lamina-grafico-2 .header .titulo h4 {
            text-align: left;
            font-size: 14px;
            margin: 0;
            margin-top: 5px;
            margin-bottom: 10px;
            font-weight: 600;
            padding-left: 30px;
            background-color: transparent;
        }
        .lamina-grafico-2 .header .titulo p {
            text-align: left;
            color: rgb(176, 176, 176);
            font-size: 13px;
            font-weight: 300;
            line-height: 16px;
            margin: 0;
            padding: 0;
            padding-left: 30px;
            background-color: transparent;
        }

        .lamina-grafico-2 canvas{
            background: transparent;                
        }

        .dim-grafico-1 {
            padding: 0;
        }

        .dim-grafico-2 {
            padding: 0;
        }

        .boton-alternancia {
            height: 25px; 
            font-size: 11px; 
            padding: 0 8px;
        }


        @media (max-width: 454px) {
            *{
                font-size: 16px;
            }

            main {
                width: 100%;
            }

            .row {
                display: flex;
                flex-direction: column;
            }

            .titulo-principal h5 {
                text-align: center !important;
            }

            .bloque h4 {
                text-align: center !important;
            }

            .dim-grafico-1 {
                margin-top: 5% !important;
                margin-inline: 10% !important;
            }

            /* Algunos cambios generales */
            .lamina-grafico-2 {
                width: 100%;
                margin-inline: 0;
                border: none !important;
                box-shadow: none !important;
            }

            .aprendizaje-contenedor {
                padding-inline: 0;
            }

            .aprendizaje-contenedor h5 {
                text-align: center !important;
            }

            .aprendizaje-contenedor p {
                padding-inline: 20px !important;
            }

            .tabla-aprendizaje table, th, td {
                    border: none !important;
                }

            .tabla-aprendizaje td {
                text-align: justify !important;
            }

            .control-pagina {
                display: flex !important;
                padding-inline: 50px !important;
                justify-content: space-around !important;
            }

            /* Grafico 2*/
            .dim-grafico-2 {
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .dim-grafico-2 canvas {
                padding: 0;
                width: 100%;
                margin: 20px 6% 20px 6%;
            }

            .header {
                display: flex;
                flex-direction: column;
            }

            .header .titulo {
                margin-bottom: 10px;
            }
            .header .titulo h4 {
                font-size: 16px !important;
                padding-left: 0 !important;
            }

            .header .titulo p {
                font-size: 16px !important;
                padding-inline: 5% !important;
                display: flex;
                text-align: justify !important;
            }

            /* APRENDIZAJES */
                #grafico3 {
                margin: 0;
            }

            #grafico3-boton .boton-comun-2{
                width: 100% !important;
                margin: 10px 0 10px 0;
            }

            /* TABLA APRENDIZAJES */

            .aprendizaje-contenedor h5 {
                    margin-left: 0 !important;
                    padding-left: 10px;
                }

                .aprendizaje-contenedor p {
                    margin-left: 0 !important;
                }

                .tabla-aprendizaje {
                    margin: 0 !important;
                }

                .tabla-aprendizaje thead {
                    display: none;
                }

                .tabla-aprendizaje, .tabla-aprendizaje tbody, .tabla-aprendizaje tr, .tabla-aprendizaje td {
                    display: block;
                    width: 100%;
                    
                }

                .tabla-aprendizaje td {
                    position: relative;
                }

                .tabla-aprendizaje td::before {
                    content: attr(data-label);
                    position: absolute;
                    left: 0;
                    width: 50%;
                    font-size: 15px;
                    font-weight: bold;
                    text-align: left;
                    
                }

                .progress-container {
                    width: 100% !important;
                }

            /* Tabla */
            .lamina-tabla {
                margin-inline: 0 !important;
                padding-inline: 5px !important;
                border: none !important;
                box-shadow: none !important;
                margin-top: 0 !important;
            }

            .lamina-tabla .titulo {
                margin-bottom: 0;
            }

            .contenedor-ancho {
                margin-inline: 0 !important;
                padding-inline: 0 !important;
            }

            .input-container {
                display: flex;
                flex-direction: column;
            }

            .titulo{
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                width: 100%;
            }

            #tabla-menu {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 5px;
                padding-inline: 10px !important;
            }

            .tabla-menu-controles {
                display: flex;
                flex-direction: column;
                justify-content: center !important;
                text-align: center !important;
                align-items: center !important;
                width: 100%;
                gap: 10 px;
            }

            
            #tabla-controles-2 {
                display: flex;
                flex-direction: row;
                justify-content: center;
            }

            .boton-comun-1 {
                height: 30px !important;
                width: 100px !important;
                padding: 4px 12px !important;
            }

            .boton-comun-2 {
                height: 30px !important;
                width: 100px !important;
                padding: 4px 12px !important;
            }

            #tabla-busqueda {
                height: 40px !important;
                width: 100%;
            }

            .contenedor-ancho {
                justify-content: left;
            }

            .footer-contenedor {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .footer-contenedor .footer-left {
                width: 80% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                text-align: center !important;
            }

            .footer-contenedor .footer-right {
                width: 80% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center;
                text-align: center;
            }
        }

        @media (min-width: 455px) and (max-width: 804px) {
            *{
                font-size: 16px;
            }

            main {
                width: 100%;
            }

            .row {
                display: flex;
                flex-direction: column;
            }

            .titulo-principal h5 {
                text-align: center !important;
            }

            .bloque h4 {
                text-align: center !important;
            }

            .dim-grafico-1 {
                min-height: 150px !important;
                max-height: 150px !important;
            }

            /* Grafico 2*/
            .dim-grafico-2 {
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .dim-grafico-2 canvas {
                padding: 0;
                width: 100%;
                margin: 20px 10% 20px 10%;
            }

            .header {
                display: flex;
                flex-direction: column;
            }

            .header .titulo {
                margin-bottom: 10px;
            }
            .header .titulo h4 {
                font-size: 16px !important;
                padding-left: 0 !important;
            }

            .header .titulo p {
                font-size: 16px !important;
                padding-inline: 5% !important;
                display: flex;
                text-align: justify !important;
            }

            /* APRENDIZAJES */
                #grafico3 {
                margin: 0;
            }

            #grafico3-boton .boton-comun-2{
                width: 100% !important;
                margin: 10px 0 10px 0;
            }


            /* TABLA APRENDIZAJES */

            .aprendizaje-contenedor h5 {
                    margin-left: 0 !important;
                    padding-left: 10px;
                }

                .aprendizaje-contenedor p {
                    margin-left: 0 !important;
                }

                .tabla-aprendizaje {
                    margin: 0 !important;
                }

                .tabla-aprendizaje thead {
                    display: none;
                }

                .tabla-aprendizaje, .tabla-aprendizaje tbody, .tabla-aprendizaje tr, .tabla-aprendizaje td {
                    display: block;
                    width: 100%;
                    
                }

                .tabla-aprendizaje td {
                    position: relative;
                }

                .tabla-aprendizaje td::before {
                    content: attr(data-label);
                    position: absolute;
                    left: 0;
                    width: 50%;
                    font-size: 15px;
                    font-weight: bold;
                    text-align: left;
                    
                }

                .progress-container {
                    width: 100% !important;
                }
            
            /* Tabla */
            .lamina-tabla {
                margin-inline: 0 !important;
                padding-inline: 5px !important;
                border: none !important;
                box-shadow: none !important;
                margin-top: 0 !important;
            }

            .lamina-tabla .titulo {
                margin-bottom: 0;
            }

            .contenedor-ancho {
                margin-inline: 0 !important;
                padding-inline: 0 !important;
            }

            .input-container {
                display: flex;
                flex-direction: column;
            }

            .titulo{
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                width: 100%;
            }

            #tabla-menu {
                width: 100%;
                display: flex;
                flex-direction: column;
                gap: 5px;
                padding-inline: 10px !important;
            }

            .tabla-menu-controles {
                display: flex;
                flex-direction: column;
                justify-content: center !important;
                text-align: center !important;
                align-items: center !important;
                width: 100%;
                gap: 10 px;
            }

            
            #tabla-controles-2 {
                display: flex;
                flex-direction: row;
                justify-content: center;
            }

            .boton-comun-1 {
                height: 30px !important;
                width: 100px !important;
                padding: 4px 12px !important;
            }

            .boton-comun-2 {
                height: 30px !important;
                width: 100px !important;
                padding: 4px 12px !important;
            }

            #tabla-busqueda {
                height: 40px !important;
                width: 100%;
            }
            
            .contenedor-ancho {
                justify-content: left;
            }

            .footer-contenedor {
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            .footer-contenedor .footer-left {
                width: 80% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                text-align: center !important;
            }

            .footer-contenedor .footer-right {
                width: 80% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center;
                text-align: center;
            }

        }

        @media (min-width: 805px) and (max-width: 1360px) {

            main {
                min-width: 805px;
                max-width: 805px;
            }


            /* Grafico 1 */
            .dim-grafico-1 {
                margin-inline: 20px !important;
            }


            /* Grafico 2*/
            .dim-grafico-2 {
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .dim-grafico-2 canvas {
                padding: 0;
                width: 100%;
                margin: 20px 20% 20px 20%;
            }

            .header {
                display: flex;
                flex-direction: column;
            }

            .header .titulo {
                margin-bottom: 10px;
            }

            .header .titulo p {
                padding-left: 0;
                display: flex;
                text-align: justify;
            }

            /* APRENDIZAJES */

            #grafico3-boton .boton-comun-2{
                margin: 10px 0 10px 0;
            }

        }

        @media (min-width: 1361px) and (max-width: 1500px) {
            /* Grafico 2*/
            .dim-grafico-2 {
                padding: 30px 200px;
            }

            /* Tabla */
            #tabla-menu {
                width: 100%;
                display: flex;
                flex-direction: row;
            }

            .tabla-menu-controles {
                display: flex;
                flex-direction: row;
            }

            #tabla-controles-1 {
                display: flex;
                flex-direction: row;
            }

            #tabla-controles-2 {
                display: flex;
                flex-direction: row;
            }

            /* APRENDIZAJES */

            #grafico3-boton .boton-comun-2{
            margin: 10px 0 10px 0;
            }
        }

        @media (min-width: 1501px) and (max-width: 2500px) {
            /* Grafico 2*/
            .dim-grafico-2 {
                padding: 30px 250px;
            }

            /* Tabla */
            #tabla-menu {
                width: 100%;
                display: flex;
                flex-direction: row;
            }

            .tabla-menu-controles {
                display: flex;
                flex-direction: row;
            }

            #tabla-controles-1 {
                display: flex;
                flex-direction: row;
            }

            #tabla-controles-2 {
                display: flex;
                flex-direction: row;
            }

            /* APRENDIZAJES */

            #grafico3-boton .boton-comun-2{
            margin: 10px 0 10px 0;
            }
        }


        .boton-comun-1 {
            height: 20px; 
            width: 80px; 
            padding:0; 
            color: rgb(108, 117, 125);
            background: #fff; 
            border: 1px solid rgb(108, 117, 125); 
            border-radius: 5px;
            padding: 0px 8px;
            transition: 0.1s ease;
        }

        .boton-comun-1:hover {
            color: #fff;
            background: rgb(108, 117, 125);         
        }

        .boton-comun-2 {
            height: 25px; 
            width: 100px; 
            padding:0;
            color: rgb(108, 117, 125);
            background: #fff; 
            border: 1px solid rgb(108, 117, 125); 
            border-radius: 5px;
            padding: 0px 8px;
            transition: 0.1s ease;
        }

        .boton-comun-2:hover{
            color: #fff;
            background: rgb(108, 117, 125);
        }
        
        .boton-desplegable-1 {
            height: 20px; 
            width: 60px; 
            color: rgb(108, 117, 125);
            background: #fff; 
            border: 1px solid rgb(108, 117, 125); 
            border-radius: 5px;
            padding: 0px 8px;
            transition: 0.1s ease;
        }

        .boton-desplegable-1:hover {
            color: #fff;
            background: rgb(108, 117, 125);
        }

        .boton-desplegable-1:focus {
            color: rgb(108, 117, 125);
            background: #fff;
        }

        .boton-icono-1 {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 20px; 
            width: 25px; 
            padding:0; 
            background: #fff; 
            border: 1px solid rgb(108, 117, 125); 
            border-radius: 5px;
            padding: 0px 8px;
            cursor: pointer;
            transition: 0.1s ease;
        }

        .boton-icono-1 i {
            color: rgb(108, 117, 125);
        }
        .boton-icono-1:hover {
            background: rgb(108, 117, 125);
        }

        .boton-icono-1:hover i {
            color: #fff;
            background: rgb(108, 117, 125);
        }

        .lamina-tabla {
            margin: 20px;
            border-radius: 0.25rem;
            padding: 10px 30px 10px 30px;
            box-shadow: 0px 0px 8px 0px #cccccc;
        }

        .contenedor-ancho {
            display: flex;
            justify-content: center;
            overflow-x: auto;
            width: 100%;
        }

        .contenedor-ancho table{
            width: 850px;
        }

        /* Estilos para las celdas de la tabla */
        .tabla-calificaciones td, .tabla-calificaciones th {
            border: 1px solid rgb(219, 219, 219);
            padding: 8px;
            text-align: left;
        }

        .tabla-calificaciones thead td {
            text-transform: uppercase;
            font-weight: bold;
            background: rgb(42, 75, 90);
            color: #F3F4F4;
        }

        #registros-pp {
            display: flex;
            flex-direction: row;
        }

        #registros-control {
            display: flex;
            flex-direction: row;
        }

        .boton-cabezal:hover {
            color: #fff;
            cursor: pointer;
        }
        
        .boton-cabezal:hover i{
            color: #fff;
        }

        .campo-boton{
            padding: 0 10px;
            border: none;
            background: transparent;
        }

        .campo-icon {
            background: transparent;
            font-size: 12px;
            color: rgb(105, 130, 139);

        }

        .campo-icon:hover {
            color: #F3F4F4;

        }

        /* HEADER */
        .logo {
            width: 100%;
            height: 150px;
            overflow: hidden;
            margin-bottom: 50px;
            background: linear-gradient(to right, rgba(30, 50, 59, 0.8) 1%, rgba(42, 75, 90, 0.8) 8%, rgba(255, 255, 255, 0) 100%), url(https://www.sanlam.co.za/blog/PublishingImages/importanceWill.jpg);
            background-blend-mode: multiply;
            background-size: cover;
            background-position: center;
            box-shadow: 0px 4px 3px 0px #b5b5b5;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .logo-nombre{
            height: 100%;
            display: flex;
            align-items: flex-end;
            text-align: left;
            color: rgb(222, 230, 233);
            background: transparent;
        }

        .titulo-principal{
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-inline: 20px !important;
        }

        .titulo-principal h3 {
            font-size: 22px;
            color: rgb(30, 50, 59);
            margin: 0;
            text-align: center;
        }

        .titulo-principal h4 {
            font-size: 18px;
            color: rgb(248, 131, 121);
            margin: 0;
            text-align: center;
        }
        
        .titulo-principal h5 {
            font-size: 13px;
            text-align: right;
            color: rgb(138, 138, 138);
        }   

        .titulo-principal h6 {
            font-size: 13px;
            text-align: center;
            margin: 0;
        }   


        /* Estilo input */
        .input-container {
            display: flex;
            justify-content: right;
            position: relative;
            margin: 10px 0 10px 0;
        }
        input[type="text"] {
            width: 200px;
            padding: 4px 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.1s ease;
        }

        input[type="text"]:focus {
            border-color: rgb(249, 140, 131);
            outline: none;
        }
        /* Estilo para el placeholder */
        .input-container input[type="text"]::placeholder {
            color: #999;
        }
        /* Efecto al pasar el cursor */
        .input-container:hover input[type="text"] {
            border-color: rgb(249, 140, 131);
        }

        /* Iconos */
        .contenedor-iconos {
            display: flex;
            flex-direction: row;
            justify-content: space-around;
            width: auto;
        }

        .contenedor-iconos .icono-vacio {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            border: 1px solid #DFE6EA;
            background: rgb(228, 230, 231);
            width: 25px;
            height: 25px;
        }

        .contenedor-iconos .icono-vacio i {
            color: rgb(187, 187, 187);
            font-size: 13px;
        }

        .contenedor-iconos .icono-vacio i.fa.fa-file-excel-o {
            text-decoration: none;
        }


        .contenedor-iconos .icono {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            border: 1px solid rgb(248, 131, 121);
            background: #fff;
            margin-inline: 2px;
            width: 25px;
            height: 25px;
            cursor: pointer;
        }

        .contenedor-iconos .icono:hover {
            border: 1px solid #fff;
            background: rgb(248, 131, 121);
        }
        .contenedor-iconos .icono i {
            font-size: 13px;
            color: #F88379;
        }

        .contenedor-iconos .icono:hover i {
            color: #fff;
        }

        .icono-enlace {
            text-decoration: none;
        }

        /* FOOTER */

        .footer-contenedor{
            background: linear-gradient(90deg, #2a4b5a 0%, #1e323b 100%);
            flex-basis: 100%;
            height: 200px;
            margin-top: 50px;
            padding: 50px 0 50px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        .footer-contenedor .footer-left, 
        .footer-contenedor .footer-right {
            display: inline-block;
            vertical-align: top;
        }

        .footer-contenedor .footer-left {
            text-align: left;
            width: 40%
        }

        .footer-contenedor .footer-right {
            text-align: left;
            width: 40%;
        }

        .footer-contenedor h3 {
            color: rgb(184, 184, 184);
            font-size: 12px;
            margin: 0;
        }

        .footer-contenedor h4 {
            color: rgb(160, 160, 160);
            font-size: 14px;
            font-weight: bold;
            margin: 0;
            margin-bottom: 10px;
        }

        .footer-contenedor p {
            color: rgb(160, 160, 160);
            margin: 0;
            padding: 0;
            font-size: 12px;
            transition: 0.2s ease;
        }

        .footer-contenedor p i {
            color: rgb(160, 160, 160);
        }

        .footer-contenedor .email:hover {
            color: rgb(248, 131, 121);
        }

        .footer-contenedor .email:hover i {
            color: rgb(248, 131, 121);
        }

        /* APRENDIZAJES (estilos heredados de informe estudiante)*/

        .aprendizaje-contenedor {
            display: flex; 
            flex-direction: column;
            margin: 20px 0 20px 0;
        }

        .aprendizaje-contenedor h5 {
            text-align: left; 
            margin-left: 30px;
            margin-bottom: 0;
        }

        .aprendizaje-contenedor p {
            text-align: left; 
            margin-left: 20px;
        }

        .tabla-aprendizaje {
            display: flex; 
            justify-content: center; 

        }

        .tabla-aprendizaje table{
            width: 95%;
        }

        .tabla-aprendizaje table tr th{
            padding: 8px;
            height: 18px;
        }

        .tabla-aprendizaje th, .tabla-aprendizaje td {
            border: 1px solid rgb(222, 230, 233);
        }

        .progress-container {
            width: 200px; /* Ancho fijo del contenedor */
            position: relative;
            border: 1px solid rgb(248, 131, 121);
        }

        .progress-bar {
            background-color: rgba(248, 131, 121, 0.4); /* Color de la barra de progreso */
            height: 20px; /* Altura de la barra de progreso */
            width: 0%; /* Ancho inicial */
            transition: 0.3s ease;
        }

        .progress-container:hover .progress-bar {
            background-color: rgba(248, 131, 121, 0.6);
        }

        .progress-value {
            position: absolute;
            top: 50%;
            left: 50%;
            color: rgb(136, 71, 65, 0.8);
            transform: translate(-50%, -50%);
            transition: 0.3s ease;
        }

        .progress-container:hover .progress-value {
            color: rgb(136, 71, 65);
        }

        /* MEDIA QUERY */
        @media(max-width: 700px){
            body {
                overflow-x: hidden;
            }
            .row {
                flex-direction: column;
            }

            .bloque{
            width: 100%;
            margin: auto;
            text-align: center;
            }

            .bloque h4{
            margin-top: 10%;
            }

            .titulo-principal,
            .titulo-principal h3,
            .titulo-principal h4,
            .titulo-principal h5 {
            margin: 0;
            }

            .contenedor-ancho {
                justify-content: left;
            }
        }
        
    </style>
<!-- Tooltip -->
<style>
    .contenedor-iconos {
        position: relative;
        display: flex;
        gap: 10px;
    }
 
    .icono-enlace {
        position: relative;
        display: inline-block;
    }
 
    .icono-enlace .tooltip {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: #fff;
        text-align: center;
        border-radius: 5px;
        padding: 5px;
        position: absolute;
        z-index: 1;
        bottom: -125%; /* Ajustar según la posición deseada */
        left: -150%;
        margin-left: -60px; /* Centra el tooltip */
        opacity: 0;
        transition: opacity 0.2s;
    }
 
    .icono-enlace:hover .tooltip {
        visibility: visible;
        opacity: 1;
    }
    /* Evitar barra de desplazamiento vertical */
    .contenedor-ancho {
        overflow: hidden;
    }
    </style>
    
</head>

    <body>
        <main>
            <!-- HEADER -->
            <section class="bloque" style="margin-top: 0;">
                <div class="logo">
                    <div class="logo-nombre">
                        <div class="svg-duoc" style="width: 150px; display: flex; justify-content:end;">
                            <img src="https://www.duoc.cl/wp-content/themes/wordpress-duoc-cl/images/logo-duoc.svg" alt="">
                        </div>
                    </div>
                </div>
                <div class="titulo-principal">
                    <h3>RETROALIMENTACIÓN DE RESULTADOS</h3>
                    <h6 id="asignatura"></h6>
                    <h4 id="nombre_prueba"></h4>
                    <h5></h5>
                </div>
            </section>
            <!-- RESULTADOS GENERALES-->
            <section class="bloque">
                <h4>RESULTADOS GENERALES DE LA EVALUACIÓN</h4>
                <div class="row">
                    <div class="bloque-col-50">
                        <div class="lamina-columna">
                            <div class="lamina-1">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>Docente</td>
                                            <td>:</td>
                                            <td id="profesor"></td>
                                        </tr>
                                        <tr>
                                            <td>Sección</td>
                                            <td>:</td>
                                            <td id="seccion"></td>
                                        </tr>
                                        <tr>
                                            <td>Sede</td>
                                            <td>:</td>
                                            <td id="nombre_sede"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="lamina-1">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td id="promedio_text">Promedio</td>
                                            <td>:</td>
                                            <td id="promedio"></td>
                                        </tr>
                                        <tr>
                                            <td>Rinden</td>
                                            <td>:</td>
                                            <td id="rinden"></td>
                                        </tr>
                                        <tr>
                                            <td id="notaMasAlta_text">Nota más alta</td>
                                            <td>:</td>
                                            <td id="mayornota"></td>
                                        </tr>
                                        <tr>
                                            <td id="notaMasBaja_text">Nota más baja</td>
                                            <td>:</td>
                                            <td id="menornota"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="bloque-col-50">
                        <div class="lamina-grafico">
                            <div class="header">
                                <div class="titulo">
                                    <h4>Distribución por desempeño</h4>
                                    <p>Muestra la proporción de alumnos según los distintos niveles de rendimiento alcanzados.</p>
                                </div>
                            </div>
                                <canvas id="myChart" class="dim-grafico-1"></canvas>
                        </div> 
                    </div>
                </div>
            </section>
            <!-- ANALISIS GRAFICO-->
            <section class="bloque">
                <h4>ANÁLISIS GRÁFICO</h4>
                <div class="row">
                    <div class="bloque-col-100">
                        <div class="lamina-columna">
                            <div class="lamina-grafico-2">
                                <div class="header">
                                    <div class="titulo">
                                        <h4>Distribución por calificación</h4>
                                        <p>Proporcionar una comprensión visual de la distribución de los datos, permitiendo identificar patrones, tendencias y concentraciones de valores.</p>
                                    </div>
                                    <div class="control">
                                        <div class="btn-group" role="group" aria-label="Basic mixed styles example">
                                            <button type="button" class="btn btn-outline-secondary boton-alternancia">Histograma</button>
                                            <button type="button" class="btn btn-outline-secondary boton-alternancia">Dispersión</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="dim-grafico-2">
                                    <canvas id="histogramChart" style="display: none;"></canvas>
                                    <canvas id="scatterChart" style="display: none;"></canvas>
                                    <canvas id="histogramChart_logro" style="display: none;"></canvas>
                                    <canvas id="scatterChart_logro" style="display: none;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- APRENDIZAJES -->
            <section class="bloque">
                <h4 id="seccion_aprendizajes_titulo"></h4>
                <div class="row">
                    <div class="bloque-col-100">
                        <div class="lamina-columna">
                            <div class="lamina-grafico-2">
                                <div class="header">
                                    <div class="titulo">
                                        <h4 id="seccion_aprendizajes_subtitulo"></h4>
                                        <p>Facilita una comparación sencilla entre los objetivos y ayuda a identificar dónde se tienen fortalezas o aspectos que requieren mayor atención.</p>
                                        <div id="grafico3-boton" style="display: flex; justify-content: right; margin-right: 20px;">
                                            <button onclick="quitarfiltrosaprendizajes()" class="boton-comun-2" style="margin-left: 10px;">Quitar filtros</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="dim-grafico-2">
                                    <canvas id="grafico3"></canvas>
                                </div>   
                                <div id="contenedor-aprendizajes" class="aprendizaje-contenedor">
                                    <!-- Aquí van las tablas por aprendizajes -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- TABLA DE CALIFICACIONES-->
            <section class="bloque">
                <h4>TABLA DE CALIFICACIONES</h4>
                <div class="row">
                    <div class="bloque-col-100">
                        <div class="lamina-tabla">
                            <div class="titulo">
                                <div id="tabla-menu" class="input-container" style="display: flex; align-items: end; justify-content: space-between; padding-left: 10px;">
                                    <div class="tabla-menu-controles" style="display: flex; align-items: end;">
                                        <div id="tabla-controles-1">
                                            <span style="margin-right: 5px;">Registros por página:</span>
                                            <select id="multiplos" class="boton-desplegable-1" style="margin-right: 5px;" onchange="cambiarRegistrosPorPagina()">
                                                <option value="8">8</option>
                                                <option value="12">12</option>
                                                <option value="50">50</option>
                                            </select> 
                                        </div>
                                        <div id="tabla-controles-2" style="display: flex; flex-direction: row; justify-content: end;">
                                            <input type="button" value="Expandir" class="boton-comun-1" style="margin-right: 5px;" onclick="expandirTabla()">
                                            <input type="button" value="Contraer" class="boton-comun-1" style="margin-right: 5px;" onclick="contraerTabla()">
                                        </div>
                                    </div>
                                    <input type="text" id="tabla-busqueda" onkeyup="filtrarTabla()" placeholder="Buscar">
                                </div>
                            </div>
                            <div class="contenedor-ancho">
                                <table id="tabla-estudiantes" class="tabla-calificaciones">
                                    <thead>
                                        <tr>
                                            <td id="t_n" onclick="ordenarNumerico(0)" class="boton-cabezal" style="box-sizing: border-box; width: 50px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0; font-weight: 600; color: #F3F4F4;">N° 
                                                    <div style="width: 25px;">
                                                        <button type="button" class="campo-boton"><i class="fas fa-sort-alpha-down campo-icon"></i></button>
                                                    </div>
                                                </div>
                                            </td>
                                            <td style="box-sizing: border-box; width: 85px;">RUT</td>
                                            <td id="t_nombre" onclick="ordenar(2)" class="boton-cabezal" style="box-sizing: border-box; width: 200px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0; font-weight: 600; color: #F3F4F4;">NOMBRE 
                                                    <div style="width: 25px;">
                                                        <button type="button" class="campo-boton" ><i class="fas fa-sort-alpha-down campo-icon"></i></button>
                                                    </div>
                                                </div>
                                            </td>
                                            <td id="mostrar_forma" class="boton-cabezal" style="box-sizing: border-box; width: 65px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0  ; font-weight: 600; color: #F3F4F4;">FORMA 
                                                </div>
                                            </td>
                                            <td id="mostrar_grupo" class="boton-cabezal" style="box-sizing: border-box; width: 65px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0  ; font-weight: 600; color: #F3F4F4;">GRUPO 
                                                </div>
                                            </td>
                                            <td id="mostrar_nota" class="boton-cabezal" style="box-sizing: border-box; width: 65px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0  ; font-weight: 600; color: #F3F4F4;">NOTA 
                                                </div>
                                            </td>
                                            <td id="mostrar_logro" class="boton-cabezal" style="box-sizing: border-box; width: 65px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0  ; font-weight: 600; color: #F3F4F4;">LOGRO 
                                                </div>
                                            </td>
                                            <td id="t_condicion" class="boton-cabezal" style="box-sizing: border-box; width: 90px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0  ; font-weight: 600; color: #F3F4F4;">CONDICIÓN 
                                                </div>
                                            </td>
                                            <td id="t_emision" class="boton-cabezal" style="box-sizing: border-box; width: 80px;">
                                                <div style="display: flex; flex-direction: row; justify-content: space-between; padding: 0; font-weight: 600; color: #F3F4F4;">EMISIÓN 
                                                </div>
                                            </td>
                                            <td class="boton-cabezal" style="box-sizing: border-box; width: 90px;">ACCIÓN</td>
                                        </tr>
                                    </thead>
                                    <tbody id="cuerpo-tabla">
                                        <!-- Aquí se insertarán las filas de estudiantes -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="control-pagina" style="display: flex; justify-content: right; padding-inline: 20px;">
                            <button onclick="cambiarPagina(-1)" class="boton-comun-2" style="margin-left: 10px;">Anterior</button>
                            <button onclick="cambiarPagina(1)" class="boton-comun-2" style="margin-left: 10px;">Siguiente</button>
                        </div>
                    </div>
                </div>
            </section>
            <!-- FOOTER -->
            <section class="bloque">
                <div class="row">
                    <div class="footer-contenedor">
                        <div class="footer-left">
                            <div class="svg-duoc" style="width: 120px; margin-bottom: 10px;">
                                <img src="https://www.duoc.cl/wp-content/themes/wordpress-duoc-cl/images/logo-duoc.svg" alt="">
                            </div>
                            <h3>SUDCRA</h3>
                            <p>Dirección de Formación General.</p>
                        </div>
                        <div class="footer-right">
                            <h4>Contacto</h4>
                            <p class="email"><i class="fas fa-envelope" style="margin-right: 5px;"></i> lgutierrez@duoc.cl</p>
                            <p class="email"><i class="fas fa-envelope" style="margin-right: 5px;"></i> mcorteze@duoc.cl</p>
                            
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </body>

    <!-- Lista de estudiantes y calificaciones -->
    <script>
        Chart.register(ChartDataLabels);
    </script>
    <!-- Capitalizar palabras -->
    <script>
        function capitalizarPalabras(str) {
            // Dividir el string en palabras usando un espacio como separador
            var palabras = str.toLowerCase().split(' ');
            // Capitalizar la primera letra de cada palabra
            for (var i = 0; i < palabras.length; i++) {
                palabras[i] = palabras[i].charAt(0).toUpperCase() + palabras[i].slice(1);
            }
            // Unir las palabras capitalizadas en un solo string
            return palabras.join(' ');
        }
    </script>
    <!-- Cálculos -->
    <script>
        // Estadisticas a partir de un dataset
        function calcularEstadisticas(datos, minimo, maximo) {
        // Filtrar datos válidos dentro del rango especificado
        var datosFiltrados = datos.filter(function(dato) {
            return dato >= minimo && dato <= maximo;
        });

            if (datosFiltrados.length > 0) {
                // Promedio
                var promedio = datosFiltrados.reduce(function(acumulador, dato) {
                    return acumulador + dato;
                }, 0) / datosFiltrados.length;

                // Valor más bajo
                var valorMasBajo = Math.min(...datosFiltrados);
                // Número de repeticiones del valor más bajo
                var repeticionesValorMasBajo = datosFiltrados.filter(function(dato) {
                    return dato === valorMasBajo;
                }).length;

                // Valor más alto
                var valorMasAlto = Math.max(...datosFiltrados);
                // Número de repeticiones del valor más alto
                var repeticionesValorMasAlto = datosFiltrados.filter(function(dato) {
                    return dato === valorMasAlto;
                }).length;

                return {
                    promedio: promedio,
                    valorMasBajo: valorMasBajo,
                    repeticionesValorMasBajo: repeticionesValorMasBajo,
                    valorMasAlto: valorMasAlto,
                    repeticionesValorMasAlto: repeticionesValorMasAlto
                };
                } else {
                    return {
                        promedio: "",
                        valorMasBajo: "",
                        repeticionesValorMasBajo: "",
                        valorMasAlto: "",
                        repeticionesValorMasAlto: ""
                    };
                }
            }

        // Función para contar la cantidad de registros donde el campo 'rinde' es igual a 'si'
        function contarRinden(estudiantes) {
            var contador_si = 0;
            var contador_no = 0;
            var totalEstudiantes = estudiantes.length;
    
            estudiantes.forEach(function(estudiante) {
                if (estudiante.rinde === "si") {
                    contador_si++;
                } else if (estudiante.rinde === "no") {
                    contador_no++;
                }
            });
    
            var porcentajeSi = (contador_si / totalEstudiantes) * 100;
    
            return {
                rinden_si: contador_si,
                rinden_no: contador_no,
                rinden_porcentaje_si: porcentajeSi
            };
        }
    
    </script>   
    <!-- Valores a imprimir en el html desde var estudiantes-->
    <script>
        document.addEventListener("DOMContentLoaded", function() {

            // REGISTROS 

            // Encontramos la evaluacion del primer estudiantes
            var primerEstudiante = estudiantes[0];
           
            // Capturamos etiquetas con id especificos
            var var_programa = document.getElementById('programa');
            var var_asignatura = document.getElementById('asignatura');
            var var_nombre_prueba = document.getElementById('nombre_prueba');
            var var_sede = document.getElementById('nombre_sede');
            var var_seccion = document.getElementById('seccion');
            var var_profesor = document.getElementById('profesor');
            
            var seccion_aprendizajes_tituloDiv = document.getElementById('seccion_aprendizajes_titulo');
            var seccion_aprendizajes_subtituloDiv = document.getElementById('seccion_aprendizajes_subtitulo');

            // Pasamos los valores a las etiquetas
            var_asignatura.textContent = primerEstudiante.asig;
            var_nombre_prueba.textContent = primerEstudiante.nombre_prueba;
            var_sede.textContent = primerEstudiante.nombre_sede;
            var_seccion.textContent = primerEstudiante.seccion;
            var_profesor.textContent = primerEstudiante.docente;

            /* Seccion de aprendizajes */
            seccion_aprendizajes_tituloDiv.textContent = aprendizajes[0].nombre_tipo_medida;
            seccion_aprendizajes_subtituloDiv.textContent = 'Logro promedio por ' + aprendizajes[0].nombre_tipo_medida;
        

        });
    </script>
    <!-- Función para categorizar las calificaciones cualitativamente -->
    <script>
    // Función para contar estudiantes por condición y actualizar el gráfico
    function categorizarCalificaciones(estudiantes) {
        var categorias = {};

        // Contar estudiantes por condición
        estudiantes.forEach(estudiante => {
            // Si la condición es "-", categorizar como "Sin rendir"
            if (estudiante.condicion === "-") {
                categorias["Sin rendir"] = (categorias["Sin rendir"] || 0) + 1;
            } else {
                // Incrementar el contador correspondiente a la condición del estudiante
                categorias[estudiante.condicion] = (categorias[estudiante.condicion] || 0) + 1;
            }
        });

        // Actualizar el gráfico
        actualizarGrafico(categorias);
    }

    // Llamar a la función para inicializar el gráfico con los datos iniciales
    categorizarCalificaciones(estudiantes);
    </script>
    <!-- Grafico circular-->
    <script>
        const data = {
            labels: [], // Etiquetas de las categorías
            datasets: [{
                label: 'Resultados',
                data: [], // Valores para cada categoría
                backgroundColor: [
                    'rgb(30, 50, 59)',
                    'rgb(59, 106, 128)',
                    'rgb(230, 57, 14)',
                    'rgb(209, 216, 219)',
                ],
                borderColor: [
                    'white'
                ],
                borderWidth: 2
            }]
        };

        // Configuración del gráfico
        const config = {
            type: 'pie',
            data: data,
            options: {
                aspectRatio: 2,
                plugins: {
                    datalabels: {
                        formatter: function(value, context) {
                        return (value/estudiantes.length*100).toFixed(1) + '%';
                        },
                        color: function(context) {
                            return 'white';
                        }  
                    },
                    responsive: false,
                    legend: {
                        display: true,
                        position: "right",
                        align: 'center',
                        labels: {
                            font: {
                                size: 12,
                            },
                            usePointStyle: true,
                        },
                    },
                },
            }
        };

        // Crear el gráfico
        var myChart = new Chart(
            document.getElementById('myChart'),
            config
        );
    </script>

    <!-- Función para actualizar el gráfico con los datos categorizados -->
    <script>
        function actualizarGrafico(categorias) {
            // Obtener el dataset del gráfico
            var dataset = myChart.data.datasets[0];

            // Actualizar los datos del dataset con las categorías
            dataset.data = Object.values(categorias);

            // Actualizar las etiquetas de las categorías
            myChart.data.labels = Object.keys(categorias).map(function(label) {
                return label;
            });

            // Actualizar el gráfico
            myChart.update();
        }

        // Llamar a la función para inicializar el gráfico con los datos iniciales
        categorizarCalificaciones(estudiantes);
    </script>

    <!-- Función para separar las calificaciones por intervalos (nota) -->
    <script>
        function categorizarCalificaciones(estudiantes) {
            var intervalos = {
                "[1-2[": 0,
                "[2-3[": 0,
                "[3-4[": 0,
                "[4-5[": 0,
                "[5-6[": 0,
                "[6-7]": 0
            };
    
            estudiantes.forEach(function(estudiante) {
                if (estudiante.nota !== "-") {
                    var intervalo = Math.floor(estudiante.nota);
                    if (intervalo < 1) {
                        intervalos["[1-2["]++;
                    } else if (intervalo >= 6) {
                        intervalos["[6-7]"]++;
                    } else {
                        intervalos["[" + intervalo + "-" + (intervalo + 1) + "["]++;
                    }
                }
            });
    
            return intervalos;
        }
    </script>
    <!-- Función para separar las calificaciones por intervalos (logro) -->
    <script>
        function categorizarCalificaciones_logro(estudiantes) {
            var intervalos_logro = {
                "[0-10[": 0,
                "[10-20[": 0,
                "[20-30[": 0,
                "[30-40[": 0,
                "[40-50[": 0,
                "[50-60[": 0,
                "[60-70[": 0,
                "[70-80[": 0,
                "[80-90[": 0,
                "[90-100]": 0
            };
    
            estudiantes.forEach(function(estudiante) {
                if (estudiante.logro_obtenido !== "-") {
                    var intervalo_logro = Math.floor(estudiante.logro_obtenido * 100 / 10) * 10;
                    if (intervalo_logro < 0) {
                        intervalos_logro["[0-10["]++;
                    } else if (intervalo_logro >= 90) {
                        intervalos_logro["[90-100]"]++;
                    } else {
                        intervalos_logro["[" + intervalo_logro + "-" + (intervalo_logro + 10) + "["]++;
                    }
                }
            });
    
            return intervalos_logro;
        }
    </script>
    <!-- Histograma (nota)-->
    <script>
     function crearHistograma(intervalos) {
        var ctx = document.getElementById('histogramChart').getContext('2d');
        var data = {
        labels: Object.keys(intervalos),
        datasets: [{
            label: 'Cantidad de Estudiantes',
            data: Object.values(intervalos),
            backgroundColor: [
                'rgb(230, 57, 14)',
                'rgb(230, 57, 14)',
                'rgb(230, 57, 14)',
                'rgb(42, 75, 90)',
                'rgb(42, 75, 90)',
                'rgb(30, 50, 59)'
            ],
            borderColor: [
                'rgba(21, 46, 59, 1)',
                'rgba(27, 71, 92, 1)',
                'rgba(33, 96, 119, 1)',
                'rgba(44, 128, 158, 1)',
                'rgba(71, 201, 249, 1)',
                'rgba(86, 240, 296, 1)'
            ],
            borderWidth: 1,
            borderColor: "white",
        }]
        };
        var maxDataValue = Math.max(...Object.values(intervalos));
        var maxYValue = maxDataValue + 1;
        var options = {
            barPercentage: 1.24,
            scales: {
                x: {
                    title: {
                        display: false,
                    },
                    grid: {
                        display: false,
                    }
                    
                },
                y: {
                    display: false,
                    max: maxYValue+2
                }
            },
            plugins: {
                legend: false,
                datalabels: {
                color: 'gray',
                font: {
                    size: 12,
                    style: 'normal',
                    family: "'Lato', 'Poppins', sans-serif",
                },
                align: 'top',
                anchor: 'end',
                display: true,
                backgroundColor: 'transparent',
                padding: {
                    top: 5,
                    bottom: 5,
                    left: 10,
                    right: 10,
                }
            }
            }
        };

        var histogramChart = new Chart(ctx, {
            type: 'bar',
            data: data,
            options: options
        });

        }

        // Inicializar el gráfico de histograma
        crearHistograma(categorizarCalificaciones(estudiantes));
    </script>
    <!-- Histograma (logro)-->
    <script>
    function crearHistograma_logro(intervalos_logro) {
        var ctx = document.getElementById('histogramChart_logro').getContext('2d');
        var data = {
        labels: Object.keys(intervalos_logro),
        datasets: [{
            label: 'Cantidad de Estudiantes',
            data: Object.values(intervalos_logro),
            backgroundColor: [
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            'rgba(106, 178, 211, 0.8)',
            ],
            borderWidth: 2,
            borderColor: 'white',
        }]
        };
        var maxDataValue = Math.max(...Object.values(intervalos_logro));
        var maxYValue = maxDataValue + 1;
        var options = {
            barPercentage: 1.24,
            scales: {
                x: {
                    title: {
                        display: false,
                    },
                    grid: {
                        display: false,
                    }
                    
                },
                y: {
                    display: false,
                    max: maxYValue+2
                }
            },
            plugins: {
                legend: false,
                datalabels: {
                color: 'gray',
                font: {
                    size: 12,
                    style: 'normal',
                    family: "'Lato', 'Poppins', sans-serif",
                },
                align: 'top',
                anchor: 'end',
                display: true,
                backgroundColor: 'transparent',
                padding: {
                    top: 5,
                    bottom: 5,
                    left: 10,
                    right: 10,
                }
            }
            }
        };

        var histogramChart = new Chart(ctx, {
            type: 'bar',
            data: data,
            options: options
        });

        }

        // Inicializar el gráfico de histograma
        crearHistograma_logro(categorizarCalificaciones_logro(estudiantes));
    </script>
    <!-- Dispersion (nota) -->
    <script>
        // Obtener las calificaciones de los estudiantes
        const calificaciones = estudiantes.map(estudiante => estudiante.nota);

        // Calcular la frecuencia de cada calificación
        const frecuenciaCalificaciones = {};
        calificaciones.forEach(nota => {
            frecuenciaCalificaciones[nota] = (frecuenciaCalificaciones[nota] || 0) + 1;
        });

        // Crear los datos para el gráfico de dispersión
        const scatterData = {
            datasets: [{
                label: 'Calificación',
                data: calificaciones.map(nota => ({
                    x: nota,
                    y: 0  // Inicialmente todos los puntos en la misma línea base
                })),
                backgroundColor: 'rgba(28, 218, 191, 0.6)',  // Color celeste
                borderColor: 'rgb(28, 218, 191)',        // Color celeste
                borderWidth: 1,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointHoverBackgroundColor: 'rgba(255, 233, 0, 0.5)',        // Color amarillo
                pointHoverBorderColor: 'rgb(255, 233, 0)',             // Color del borde al hacer hover
                
            }],
        };

        // Configuración del gráfico de dispersión
        const scatterConfig = {
            type: 'scatter',
            data: scatterData,
            options: {
                responsive: true,
                scales: {
                    x: {
                        type: 'linear',
                        title: {
                            display: false,
                            text: 'Calificaciones'
                        },

                        grid: {
                        display: false,
                        },
                        min: 0,
                        max: 8,
                        grid: {
                            display: true,
                            drawBorder: false, // No dibujar la línea del borde del gráfico
                            drawOnChartArea: false, // No dibujar la línea de la escala en el área del gráfico
                        },
                        ticks: {
                            callback: function(value, index, values) {
                                // Mostrar solo las etiquetas de 1 a 7
                                if (value >= 1 && value <= 7) {
                                    return value;
                                } else {
                                    return '';
                                }
                            }
                        }
                    },

                    y: {
                        display: false,  // Ocultar el eje y
                        type: 'linear',
                        title: {
                            display: false,
                            text: 'Altura'
                        },
                        max: 3,
                        min: -3,
                        ticks: {
                            stepSize: 5,  // Separación de 5 píxeles entre puntos
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                            // Obtener el índice del punto actual
                            const pointIndex = context.dataIndex;
                            // Obtener el nombre del estudiante asociado al punto
                            const studentName = estudiantes[pointIndex].nombre_alum;
                            // Construir la etiqueta del tooltip con el nombre del estudiante y su logro
                            return studentName + ', ' + context.raw.x.toFixed(1);

                            }
                        },
                        backgroundColor: 'rgba(0, 0, 0, 0.05)', // Color de fondo del tooltip
                        borderColor: 'rgba(255, 255, 255, 0.5)', // Color del borde del tooltip
                        borderWidth: 0, // Ancho del borde del tooltip
                        titleColor: 'rgba(255, 255, 255, 1)', // Color del texto del título del tooltip
                        bodyColor: 'rgba(0, 0, 0, 0.6)', // Color del texto del cuerpo del tooltip

                    },
                }
            }
        };

        // Crear el gráfico de dispersión
        var scatterChart = new Chart(
            document.getElementById('scatterChart'),
            scatterConfig
        );
        // Distribuir los puntos verticalmente para evitar superposiciones
        Object.entries(frecuenciaCalificaciones).forEach(([nota, frecuencia]) => {
            if (frecuencia > 1) {
                const data = scatterData.datasets[0].data.filter(point => point.x == nota);
                const alturas = [];
                for (let i = 0; i < frecuencia; i++) {
                    alturas.push(((i - (frecuencia - 1) / 2) / ((frecuencia - 1) / 2)) * 1); // Las alturan se mueven en el rango -1 a 1.
                }
                data.forEach((point, index) => {
                    point.y = alturas[index];
                    point.label = ""; // Establecer la etiqueta en blanco para todos los puntos
                });
            } else {
                // Si solo hay un punto con esta calificación, también eliminamos su etiqueta
                const data = scatterData.datasets[0].data.filter(point => point.x == nota);
                data.forEach(point => {
                    point.label = ""; // Establecer la etiqueta en blanco para todos los puntos
                });
            }
        });


        // Actualizar el gráfico después de distribuir los puntos
        scatterChart.update();
    </script>
    <!-- Dispersion (logro) -->
    <script>
        // Obtener los logros obtenidos de los estudiantes
        const logros = estudiantes.map(estudiante => Math.round(estudiante.logro_obtenido * 100));

        // Calcular la frecuencia de cada logro
        const frecuenciaLogros = {};
        logros.forEach(logro => {
            frecuenciaLogros[logro] = (frecuenciaLogros[logro] || 0) + 1;
        });

        // Crear los datos para el gráfico de dispersión para logros obtenidos
        const scatterDataLogros = {
            datasets: [{
                label: 'Logro',
                data: logros.map(logro => ({
                    x: logro,
                    y: 0  // Inicialmente todos los puntos en la misma línea base
                })),
                backgroundColor: 'rgba(28, 218, 191, 0.6)',  // Color celeste
                borderColor: 'rgb(28, 218, 191)',        // Color celeste
                borderWidth: 1,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointHoverBackgroundColor: 'rgba(255, 233, 0, 0.5)',        // Color amarillo
                pointHoverBorderColor: 'rgb(255, 233, 0)',             // Color del borde al hacer hover
            }],
        };

        // Configuración del gráfico de dispersión para logros obtenidos
        const scatterConfigLogros = {
            type: 'scatter',
            data: scatterDataLogros,
            options: {
                responsive: true,
                scales: {
                    x: {
                        type: 'linear',
                        title: {
                            display: true,
                            text: 'Logros obtenidos'
                        },
                        grid: {
                            display: false,
                        },
                        min: -10,
                        max: 110,
                        grid: {
                            display: true,
                            drawBorder: false, // No dibujar la línea del borde del gráfico
                            drawOnChartArea: false, // No dibujar la línea de la escala en el área del gráfico
                        },
                        ticks: {
                            stepSize: 10,
                            callback: function(value, index, values) {
                                // Mostrar solo las etiquetas de 0 a 100
                                if (value >= 0 && value <= 100) {
                                    return value;
                                } else {
                                    return '';
                                }
                            }
                        }
                    },
                    y: {
                        display: false,  // Ocultar el eje y
                        type: 'linear',
                        title: {
                            display: false,
                            text: 'Altura'
                        },
                        max: 3,
                        min: -3,
                        ticks: {
                            stepSize: 1,  // Separación de 1 unidad entre puntos
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                    },
                    tooltip: {
                    callbacks: {
                        label: function(context) {
                            // Obtener el índice del punto actual
                            const pointIndex = context.dataIndex;
                            // Obtener el nombre del estudiante asociado al punto
                            const studentName = estudiantes[pointIndex].nombre_alum;
                            // Construir la etiqueta del tooltip con el nombre del estudiante y su logro
                            return studentName + ', ' + context.raw.x + '%';
                        }
                    },
                        backgroundColor: 'rgba(0, 0, 0, 0.05)', // Color de fondo del tooltip
                        borderColor: 'rgba(255, 255, 255, 0.5)', // Color del borde del tooltip
                        borderWidth: 0, // Ancho del borde del tooltip
                        titleColor: 'rgba(255, 255, 255, 1)', // Color del texto del título del tooltip
                        bodyColor: 'rgba(0, 0, 0, 0.6)', // Color del texto del cuerpo del tooltip
                },

                }
            }
        };

        // Crear el gráfico de dispersión para logros obtenidos
        var scatterChartLogros = new Chart(
            document.getElementById('scatterChart_logro'),
            scatterConfigLogros
        );

        // Distribuir los puntos verticalmente para evitar superposiciones
        Object.entries(frecuenciaLogros).forEach(([logro, frecuencia]) => {
            if (frecuencia > 1) {
                const data = scatterDataLogros.datasets[0].data.filter(point => point.x == logro);
                const alturas = [];
                for (let i = 0; i < frecuencia; i++) {
                    alturas.push(((i - (frecuencia - 1) / 2) / ((frecuencia - 1) / 2)) * 1); // Las alturan se mueven en el rango -1 a 1.
                }
                data.forEach((point, index) => {
                    point.y = alturas[index];
                    point.label = ""; // Establecer la etiqueta en blanco para todos los puntos
                });
            } else {
                // Si solo hay un punto con este logro, también eliminamos su etiqueta
                const data = scatterDataLogros.datasets[0].data.filter(point => point.x == logro);
                data.forEach(point => {
                    point.label = ""; // Establecer la etiqueta en blanco para todos los puntos
                });
            }
        });

        // Actualizar el gráfico después de distribuir los puntos
        scatterChartLogros.update();
    </script>
    <!-- Cambiar entre grafico de histograma o dispersión -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const histogramButton = document.querySelector(".boton-alternancia:nth-of-type(1)");
            const scatterButton = document.querySelector(".boton-alternancia:nth-of-type(2)");
            const histogramChart = document.getElementById("histogramChart");
            const scatterChart = document.getElementById("scatterChart");
            const histogramChart_logro = document.getElementById("histogramChart_logro");
            const scatterChart_logro = document.getElementById("scatterChart_logro");

            if (estudiantes[0].num_prueba === 0) {
                // Primero ocultamos graficos de nota
                histogramChart.style.display = "none"; // Mostrar el histograma
                scatterChart.style.display = "none"; // Ocultar la dispersión
                // Por defecto mostramos histograma de logro
                histogramChart_logro.style.display = "block";
                // Ahora se aplica la logica de switch
                histogramButton.addEventListener("click", function() {
                    histogramChart_logro.style.display = "block"; // Mostrar el histograma
                    scatterChart_logro.style.display = "none"; // Ocultar la dispersión
                });

                scatterButton.addEventListener("click", function() {
                    histogramChart_logro.style.display = "none"; // Ocultar el histograma
                    scatterChart_logro.style.display = "block"; // Mostrar la dispersión
                });
            } else {
                //  Primero ocultamos graficos de logro
                histogramChart_logro.style.display = "none"; // Mostrar el histograma
                scatterChart_logro.style.display = "none"; // Ocultar la dispersión
                // Por defecto mostramos histograma de nota
                histogramChart.style.display = "block";
                // Ahora se aplica la logica de switch
                histogramButton.addEventListener("click", function() {
                    histogramChart.style.display = "block"; // Mostrar el histograma
                    scatterChart.style.display = "none"; // Ocultar la dispersión
                });

                scatterButton.addEventListener("click", function() {
                    histogramChart.style.display = "none"; // Ocultar el histograma
                    scatterChart.style.display = "block"; // Mostrar la dispersión
                });
            }
                
        });
    </script>
    <!-- Ordenar elementos en tabla (texto)-->
    <script>
        var ordenAscendente = true; // Variable para rastrear el estado del orden
    
        function ordenar(columna) {
            paginaActual = 1;
            mostrarEstudiantes();
            expandirTabla(); // Expandir la tabla antes de ordenar

            var tbody = document.getElementById("cuerpo-tabla");
            var filas = tbody.rows;
            var arrFilas = Array.from(filas).slice(0); // Convertir las filas a un array para poder ordenarlas

            arrFilas.sort(function(a, b) {
                var contenidoA = a.cells[columna].textContent.trim().toUpperCase();
                var contenidoB = b.cells[columna].textContent.trim().toUpperCase();
    
                if (ordenAscendente) {
                    if (contenidoA < contenidoB) {
                        return -1;
                    }
                    if (contenidoA > contenidoB) {
                        return 1;
                    }
                    return 0;
                } else {
                    if (contenidoA < contenidoB) {
                        return 1;
                    }
                    if (contenidoA > contenidoB) {
                        return -1;
                    }
                    return 0;
                }
            });
    
            tbody.innerHTML = ""; // Limpiar el cuerpo de la tabla
    
            for (var i = 0; i < arrFilas.length; i++) {
                tbody.appendChild(arrFilas[i]); // Agregar las filas ordenadas al cuerpo de la tabla
            }
    
            // Cambiar el estado del orden para la próxima vez que se llame a la función
            ordenAscendente = !ordenAscendente;
        }
    </script>
    <!-- Ordenar elementos en tabla (numero)-->
    <script>
        var ordenAscendente = true; // Variable para rastrear el estado del orden

        function ordenarNumerico(columna) {
            paginaActual = 1;
            mostrarEstudiantes();
            expandirTabla(); // Expandir la tabla antes de ordenar
            
            var tbody = document.getElementById("cuerpo-tabla");
            var filas = tbody.rows;
            var arrFilas = Array.from(filas).slice(0); // Convertir las filas a un array para poder ordenarlas

            arrFilas.sort(function(a, b) {
                var contenidoA = a.cells[columna].textContent.trim();
                var contenidoB = b.cells[columna].textContent.trim();
                
                // Verificar si el contenido contiene el carácter "-"
                var tieneGuionA = contenidoA.includes("-");
                var tieneGuionB = contenidoB.includes("-");
                
                if (tieneGuionA && !tieneGuionB) {
                    return (ordenAscendente) ? -1 : 1; // Colocar contenidoA antes que contenidoB si es ascendente, de lo contrario, después
                } else if (!tieneGuionA && tieneGuionB) {
                    return (ordenAscendente) ? 1 : -1; // Colocar contenidoB antes que contenidoA si es ascendente, de lo contrario, después
                } else {
                    // Ambos tienen o no tienen guion, proceder con el orden numérico
                    contenidoA = parseFloat(contenidoA.replace("-", ""));
                    contenidoB = parseFloat(contenidoB.replace("-", ""));

                    if (ordenAscendente) {
                        return contenidoA - contenidoB;
                    } else {
                        return contenidoB - contenidoA;
                    }
                }
            });

            tbody.innerHTML = ""; // Limpiar el cuerpo de la tabla

            for (var i = 0; i < arrFilas.length; i++) {
                tbody.appendChild(arrFilas[i]); // Agregar las filas ordenadas al cuerpo de la tabla
            }

            // Cambiar el estado del orden para la próxima vez que se llame a la función
            ordenAscendente = !ordenAscendente;
        }
    </script>
    <!-- Buscar en tabla -->
    <script>
        function filtrarTabla() {
            var input = document.getElementById("tabla-busqueda");
            var filtro = input.value.toUpperCase();
            var tabla = document.getElementById("tabla-estudiantes");
            var filas = tabla.getElementsByTagName("tr");
    
            // Guardar la posición actual de desplazamiento
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    
            // Si el filtro está en blanco, contraer la tabla, de lo contrario, expandirla
            if (filtro.trim() === "") {
                contraerTabla();
            } else {
                expandirTabla();
            }

            // Recorrer todas las filas de la tabla a partir del segundo elemento (índice 1) para omitir la fila de encabezados
            for (var i = 1; i < filas.length; i++) {
                var celdaNombre = filas[i].getElementsByTagName("td")[2]; // Índice de la columna de nombre
                if (celdaNombre) {
                    var textoCelda = celdaNombre.textContent || celdaNombre.innerText;
                    if (textoCelda.toUpperCase().indexOf(filtro) > -1) {
                        filas[i].style.display = "";
                    } else {
                        filas[i].style.display = "none";
                    }
                }
            }
    
            // Restaurar la posición de desplazamiento después de la búsqueda
            window.scrollTo(0, scrollTop);
        }
    </script>
    <!-- Variables condicionales -->
    <script>    
    /* Determinar columnas para ocultar */
    let ocultar_forma = "no";
    let ocultar_grupo = "no";
    let ocultar_nota = "no";

    var estadisticas_nota = calcularEstadisticas(estudiantes.map(estudiante => estudiante.nota), 1, 7);
    var estadisticas_logro = calcularEstadisticas(estudiantes.map(estudiante => estudiante.logro_obtenido), 0, 100);

    var var_rinden = contarRinden(estudiantes);

    // Verificar si hay al menos un estudiante con 'tiene_forma' igual a "no"
    for (let i = 0; i < estudiantes.length; i++) {
        if (estudiantes[i].tiene_formas === "no") {
            ocultar_forma = "si";
            break; // Detener la búsqueda una vez que se encuentra al menos un "no"
        }
    }

    // Verificar si hay al menos un estudiante con 'tiene_grupo' igual a "no"
    for (let i = 0; i < estudiantes.length; i++) {
        if (estudiantes[i].tiene_grupo === "no") {
            ocultar_grupo = "si";
            break; // Detener la búsqueda una vez que se encuentra al menos un "no"
        }
    }

    // Verificar el numero de la prueba para ver si cambiar por logro
    // Divs que cambian entre nota y logro
    var promedio_textDiv = document.getElementById("promedio_text");
    var rinden_Div = document.getElementById("rinden");
    var promedio_Div = document.getElementById("promedio");
    var notaMasAlta_text_Div = document.getElementById("notaMasAlta_text");
    var mayornota_Div = document.getElementById("mayornota");
    var notaMasBaja_text_Div = document.getElementById("notaMasBaja_text");
    var menornota_Div = document.getElementById("menornota");
    var mostrar_nota_Div = document.getElementById("mostrar_nota");
    var mostrar_logroDiv = document.getElementById("mostrar_logro");
    
    
    if (estudiantes[0].num_prueba === 0) {
        promedio_textDiv.innerHTML = "Logro promedio";
        promedio_Div.innerHTML  = (estadisticas_logro.promedio * 100).toFixed(1) + "%.";
        rinden_Div.innerHTML  = var_rinden.rinden_si + " estudiantes(" + var_rinden.rinden_porcentaje_si.toFixed(1) + "%)"
        notaMasAlta_text_Div.innerHTML = "Logro más alto";
        mayornota_Div.innerHTML = (estadisticas_logro.valorMasAlto * 100).toFixed(1) + "%(" + estadisticas_logro.repeticionesValorMasAlto + ")"
        notaMasBaja_text_Div.innerHTML = "Logro más bajo";
        menornota_Div.innerHTML = (estadisticas_logro.valorMasBajo * 100).toFixed(1) + "%(" + estadisticas_logro.repeticionesValorMasBajo + ")"
        mostrar_nota_Div.style.display = "none";
        mostrar_logroDiv.style.display = "true";
    } else {       
        promedio_Div.innerHTML  = estadisticas_nota.promedio.toFixed(1);
        rinden_Div.innerHTML  = var_rinden.rinden_si + " estudiantes(" + var_rinden.rinden_porcentaje_si.toFixed(1) + "%)"
        notaMasAlta_text_Div.innerHTML = "Nota más alta";
        mayornota_Div.innerHTML = estadisticas_nota.valorMasAlto.toFixed(1) + "(" + estadisticas_nota.repeticionesValorMasAlto + ")"
        notaMasBaja_text_Div.innerHTML = "Nota más baja";
        menornota_Div.innerHTML = estadisticas_nota.valorMasBajo.toFixed(1) + "(" + estadisticas_nota.repeticionesValorMasBajo + ")"
        mostrar_nota_Div.style.display = "true";
        mostrar_logroDiv.style.display = "none";
    }

    </script>
    <!-- Paginacion -->
    <script>
        var registrosPorPagina = 8;
        var paginaActual = 1;

        function mostrarEstudiantes() {
            var inicio = (paginaActual - 1) * registrosPorPagina;
            var fin = inicio + registrosPorPagina;
            var tbody = document.getElementById('cuerpo-tabla');
            tbody.innerHTML = '';
    

            
            for (var i = inicio; i < fin && i < estudiantes.length; i++) {
                var estudiante = estudiantes[i];
                var fila = '<tr>';
                    fila += '<td' + (estudiante.nota === "-" ? ' style="color: rgb(138, 138, 138);"' : '') + '>' + estudiante.n + '</td>';
                    fila += '<td' + (estudiante.nota === "-" ? ' style="color: rgb(138, 138, 138);"' : '') + '>' + estudiante.rut + '</td>';
                    fila += '<td' + (estudiante.nota === "-" ? ' style="color: rgb(138, 138, 138);"' : '') + '>' + estudiante.nombre_alum + '</td>';

                    if (ocultar_forma === "no") {
                        fila += '<td style="text-align: center;' + (estudiante.nota === "-" ? ' color: rgb(138, 138, 138);' : '') + '">' + estudiante.forma + '</td>';
                    } else {
                        document.getElementById("mostrar_forma").style.display = "none";
                    }

                    if (ocultar_grupo === "no") {
                        fila += '<td style="text-align: center;' + (estudiante.nota === "-" ? ' color: rgb(138, 138, 138);' : '') + '">' + estudiante.grupo + '</td>';
                    } else {
                        document.getElementById("mostrar_grupo").style.display = "none";
                    }


                    if (estudiantes[0].num_prueba === 0) {
                        fila += '<td style="text-align: center;' + (estudiante.nota === "-" ? 'color: rgb(138, 138, 138);' : (estudiante.nota < 4 ? ';' : '')) + '">';
                        fila += (estudiante.nota === "-" ? "-" : (estudiante.logro_obtenido * 100).toFixed(1));
                        fila += '</td>';
                    } else {
                        fila += '<td style="text-align: center;' + (estudiante.nota === "-" ? 'color: rgb(138, 138, 138);' : (estudiante.nota < 4 ? ';' : '')) + '">' + estudiante.nota + '</td>';
                    }



                    fila += '<td style="text-align: center;' + (estudiante.nota === "-" ? ' color: rgb(138, 138, 138);' : '') + '">' + estudiante.condicion + '</td>';

                    fila += '<td' + (estudiante.nota === "-" ? ' style="color: rgb(138, 138, 138);"' : '') + '>';
                    fila += (estudiante.nota === "-" ? "-" : estudiante.lectura_fecha);
                    fila += '</td>';


                    // Tooltip
                    fila += '<td>' +
                    "<div class='contenedor-iconos'>" +
                        "<div class='icono-enlace'>" +
                            ((estudiante.tiene_imagen === 'si' && estudiante.nota !== "-") ?
                                "<a href='" + estudiante.imagen + "' target='_blank'>" +
                                    "<div class='icono'>" :
                                "<div class='icono-vacio'>") +
                                    "<i class='fa fa-file-image'></i>" +
                                    "<span class='tooltip'>" + (((estudiante.tiene_imagen === 'si') && (estudiante.nota !== "-")) ? 'Ver imagen' : 'No hay imagen') + "</span>" +
                                "</div>" +
                            ((estudiante.tiene_imagen === 'si' && estudiante.nota !== "-") ? "</a>" : "") +
                        "</div>" +
                        "<div class='icono-enlace'>" +
                            ((estudiante.tiene_planilla === 'si' && estudiante.nota !== "-") ?
                                "<a href='" + estudiante.link_planilla + "' target='_blank'>" +
                                    "<div class='icono'>" :
                                "<div class='icono-vacio'>") +
                                    "<i class='fa fa-file-excel-o'></i>" +
                                    "<span class='tooltip'>" + (((estudiante.tiene_planilla === 'si') && (estudiante.nota !== "-")) ? 'Ver planilla' : 'No hay planilla') + "</span>" +
                                "</div>" +
                            ((estudiante.tiene_planilla === 'si' && estudiante.nota !== "-") ? "</a>" : "") +
                        "</div>" +
                        "<div class='icono-enlace'>" +
                            ((estudiante.tiene_informe === 'si' && estudiante.nota !== "-") ?
                                "<a href='" + estudiante.informe + "' target='_blank'>" +
                                    "<div class='icono'>" :
                                "<div class='icono-vacio'>") +
                                    "<i class='fa fa-file-text'></i>" +
                                    "<span class='tooltip'>" + (((estudiante.tiene_informe === 'si') && (estudiante.nota !== "-")) ? 'Ver informe' : 'No hay informe') + "</span>" +
                                "</div>" +
                            ((estudiante.tiene_informe === 'si' && estudiante.nota !== "-") ? "</a>" : "") +
                        "</div>" +
                    "</div>";
                '</td>';
                fila += '</tr>';
                tbody.innerHTML += fila;
            }
        }

        function cambiarRegistrosPorPagina() {
            registrosPorPagina = parseInt(document.getElementById('multiplos').value);
            mostrarEstudiantes();
        }
    
        function expandirTabla() {
            paginaActual = 1;
            mostrarEstudiantes();

            var opcionExpandir = document.querySelector('option[value="50"]');
            opcionExpandir.selected = true;
            cambiarRegistrosPorPagina();
        }

        function contraerTabla() {
            paginaActual = 1;
            mostrarEstudiantes();
            
            var opcionContraer = document.querySelector('option[value="8"]');
            opcionContraer.selected = true;
            cambiarRegistrosPorPagina();
        }

        function cambiarPagina(cambio) {
            paginaActual += cambio;
            if (paginaActual < 1) {
                paginaActual = 1;
            } else if (paginaActual > Math.ceil(estudiantes.length / registrosPorPagina)) {
                paginaActual = Math.ceil(estudiantes.length / registrosPorPagina);
            }
            mostrarEstudiantes();
        }
    
        // Mostrar estudiantes en la primera página al cargar la página
        mostrarEstudiantes();
    </script>

    <!-- Scripts heredados desde informe estudiante-->

    <!-- Grafico 3 de barras para aprendizajes -->
    <script>
        var aprendizajesUnicos = [];
        var aprendizamientosUnicosSet = new Set();
        aprendizajes.forEach(aprendizaje => {
            if (!aprendizamientosUnicosSet.has(aprendizaje.aprendizaje)) {
                aprendizajesUnicos.push(aprendizaje);
                aprendizamientosUnicosSet.add(aprendizaje.aprendizaje);
            }
        });
    
        // Extraer los datos necesarios para el gráfico
        var gruposLabels = aprendizajesUnicos.map(aprendizaje => aprendizaje.dimension);
        var datos = aprendizajesUnicos.map(aprendizaje => parseFloat(aprendizaje.logro_prom));
    
        // Obtener el contexto del canvas
        let ctx = document.getElementById('grafico3').getContext('2d');
    
        // Crear el gráfico de barras
        let myChart3 = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: gruposLabels,
                datasets: [{
                    label: 'Logro porcentual por aprendizaje',
                    data: datos,
                    backgroundColor: 'rgba(54, 162, 235, 0.2)', // Color de fondo de las barras
                    borderColor: 'rgba(54, 162, 235, 1)', // Color del borde de las barras
                    borderWidth: 1
                }]
            },
            options: {
                plugins: {
                    datalabels: {
                        formatter: function(value, context) {
                            return value + '%'; // Añadir el símbolo "%" al valor
                        },
                    }
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
        
        // Agregar un evento de clic al gráfico
        document.getElementById('grafico3').onclick = function(evt) {
        let activePoints = myChart3.getElementsAtEventForMode(evt, 'nearest', { intersect: true }, false);
        let firstPoint = activePoints[0];
        if (firstPoint) {
        let aprendizajeSeleccionado = myChart3.data.labels[firstPoint.index];
        // Cambiar el color de todas las barras a gris
        myChart3.data.datasets[0].backgroundColor = Array(myChart3.data.datasets[0].data.length).fill('rgba(128, 128, 128, 0.2)');
        myChart3.data.datasets[0].borderColor = Array(myChart3.data.datasets[0].data.length).fill('rgba(128, 128, 128, 0.6)'); // Añadir esta línea
        // Mantener el color de la barra seleccionada y su borde
        myChart3.data.datasets[0].backgroundColor[firstPoint.index] = 'rgba(54, 162, 235, 0.2)';
        myChart3.data.datasets[0].borderColor[firstPoint.index] = 'rgba(54, 162, 235, 1)';

        // Renderizar el gráfico con los nuevos colores
        myChart3.update();

        // Aquí puedes realizar cualquier otra acción que necesites
        // Por ejemplo, filtrar una tabla como en tu código original
        filtrartablaaprendizaje(aprendizajeSeleccionado);
    }
    };
    </script>
    <!-- Crear tablas por aprendizaje-->
    <script>
        function obtenerDescripcionIndicadores() {
            var homeDiv = document.getElementById('contenedor-aprendizajes');

            var uniqueAprendizajes = [...new Set(aprendizajes.map(item => item.aprendizaje))];
            uniqueAprendizajes.forEach((aprendizaje, index) => {
                var descripcionAprendizaje = aprendizajes.find(item => item.aprendizaje === aprendizaje).descripcion_aprendizaje;
                var descripcionIndicadores = aprendizajes.filter(item => item.aprendizaje === aprendizaje);
                
                var contenedorAprendizaje = document.createElement('div');
                contenedorAprendizaje.classList.add('aprendizaje-contenedor');
                contenedorAprendizaje.setAttribute('id', aprendizajes[0].dimension.slice(0, -1) + (index + 1));

                var titulo = document.createElement('h5');
                titulo.textContent = aprendizajes[0].nombre_tipo_medida + ' ' + obtenerNumeroTitulo(aprendizajes[0].dimension.slice(0, -1)) + (index + 1);

                var descripcion = document.createElement('p');
                descripcion.textContent = descripcionAprendizaje;

                var tabla = document.createElement('div');
                tabla.classList.add('tabla-rc', 'tabla-aprendizaje');

                var tablaHtml = '<table><thead style="background: rgb(42, 75, 90); color: #fff;">' +
                    '<tr><th style="width: 500px; color: #fff;">' + aprendizajes[0].nombre_tipo_medida2 + '</th>' +
                    '<th style="width: auto; color: #fff;">% de logro</th></tr></thead><tbody>';

                descripcionIndicadores.forEach(indicador => {
                    tablaHtml += '<tr><td>' + indicador.descripcion_indicador + '</td><td><div class="progress-container" id="progress-container-' + indicador.n + '"><div class="progress-bar" id="progress-bar-' + indicador.n + '"></div><div class="progress-value" id="progress-value-' + indicador.n + '">' + indicador.logro + '</div></div></td></tr>';
                });

                tablaHtml += '</tbody></table>';

                tabla.innerHTML = tablaHtml;

                contenedorAprendizaje.appendChild(titulo);
                contenedorAprendizaje.appendChild(descripcion);
                contenedorAprendizaje.appendChild(tabla);

                homeDiv.appendChild(contenedorAprendizaje);
            });

    }

    // Función auxiliar para obtener el número del título
    function obtenerNumeroTitulo(texto) {
        var regex = /\d+$/; // Expresión regular para encontrar el número al final del texto
        var match = regex.exec(texto);
        return match ? match[0] : ''; // Devuelve el número encontrado o una cadena vacía si no se encuentra
    }

    // Llame a la función para agregar el contenido al div existente "home":
    obtenerDescripcionIndicadores();

    </script> 
    <!-- Filtra de tablas -->
    <script>
        function filtrartablaaprendizaje(aprendizajeSeleccionado) {
            // Obtener todos los divs
            let divs = document.querySelectorAll('div');
    
            // Ocultar todos los divs cuyos IDs comienzan con aprendizajeSeleccionado menos los últimos tres caracteres
            divs.forEach(function(div) {
                if (div.id.startsWith(aprendizajeSeleccionado.substring(0, aprendizajeSeleccionado.length - 3))) {
                    div.style.display = "none";
                }
            });
    
            // Mostrar el div correspondiente al aprendizaje seleccionado
            let divSeleccionado = document.getElementById(aprendizajeSeleccionado);
            if (divSeleccionado) {
                divSeleccionado.style.display = "block";
            }
        }
    </script>
    <!-- Quitar filtros -->
    <script>
        function quitarfiltrosaprendizajes() {
        // PRIMERO RESTABLECEMOS COLORES DEL GRAFICO
        // Obtener el color original de las barras del conjunto de datos
        let coloresOriginalesFondo = myChart3.data.datasets[0].backgroundColor.map(color => 'rgba(54, 162, 235, 0.2)');
        let coloresOriginalesBorde = myChart3.data.datasets[0].borderColor.map(color => 'rgba(54, 162, 235, 1)');
        // Asignar los colores originales al conjunto de datos del gráfico
        myChart3.data.datasets[0].backgroundColor = coloresOriginalesFondo;
        myChart3.data.datasets[0].borderColor = coloresOriginalesBorde;

        // Actualizar el gráfico con los colores restablecidos
        myChart3.update();
        
        // SEGUNDO RESTABLECEMOS LOS DIVS
        // Obtener todos los divs
        let divs = document.querySelectorAll('div');
        
        // Obtener el substring del ID del primer elemento en aprendizajes
        let substringLength = aprendizajes[0].dimension.length - 3;
        let substringPrefix = aprendizajes[0].dimension.substring(0, substringLength);

        // Iterar sobre los divs
        divs.forEach(function(div) {
            // Verificar si el ID del div comienza con el substringPrefix
            if (div.id.startsWith(substringPrefix)) {
                div.style.display = "block"; // Mostrar el div
            }
        });
    }
    </script>
    
    <!-- Crea barras de progreso -->
    <script>
        // Obtener todos los elementos de progreso
        let elementosProgreso = document.querySelectorAll('.progress-container');

        // Iterar sobre cada elemento de progreso
        elementosProgreso.forEach((elemento, index) => {
            elemento.style.margin = 'auto';
            // Obtener el valor numérico desde el elemento <td>
            let valor = parseInt(elemento.querySelector('.progress-value').innerText.trim());

            // Obtener el elemento de la barra de progreso y establecer su ancho
            let progressBar = elemento.querySelector('.progress-bar');
            progressBar.style.width = valor + '%';

            // Actualizar el valor dentro del div
            let valueDiv = elemento.querySelector('.progress-value');
            valueDiv.innerText = valor + '%';
        });
    </script>


</html>

